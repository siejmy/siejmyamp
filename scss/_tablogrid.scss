@use "sass:math";

@mixin tablogrid-for-screen-width($screenBreak) {
  $gutterFrac: 0.08;
  $cellRatio: 1.5;
  $rowWidth: ((1-$gutterFrac)) * $screenBreak;
  $gutterSize: $gutterFrac * $screenBreak;
  $singleCellHeight: math.div($rowWidth, $cellRatio);
  $doubleCellWidth: math.div($rowWidth - $gutterSize, 2);
  $doubleCellHeight: math.div($doubleCellWidth, $cellRatio);
  $doubleContainerHeight: 2 * $doubleCellHeight + $gutterSize;

  .tgrow_prnt {
    margin: 0 auto;
    width: $rowWidth;
    margin-bottom: $gutterSize;
  }

  .tgrow {
    display: grid;
    row-gap: $gutterSize;
    column-gap: $gutterSize;

    .tgcol {
      .tablogrid_client {
        width: 100%;
        position: relative;
        contain: strict;
      }
    }

    .tgrow.uno {
      grid-template-columns: 100%;
      grid-template-rows: $singleCellHeight;

      .tgcol {
        .tablogrid_client {
          height: $singleCellHeight;
        }
      }
    }

    .tgrow.tbr {
      grid-template-columns: $doubleCellWidth $doubleCellWidth;
      grid-template-rows: $singleCellHeight $singleCellHeight;

      .tgcol:nth-child(1) {
        grid-row: 1 1;
        grid-column: 1 1;

        .tablogrid_client {
          height: $doubleCellHeight;
        }
      }

      .tgcol:nth-child(2) {
        grid-row: 2 2;
        grid-column: 1 1;

        .tablogrid_client {
          height: $doubleCellHeight;
        }
      }

      .tgcol:nth-child(3) {
        grid-row-start: 1;
        grid-row-end: span 2;
        grid-column: 2 2;

        .tablogrid_client {
          height: $doubleContainerHeight;
        }
      }
    }

    .tgrow.ltb {
      grid-template-columns: $doubleCellWidth $doubleCellWidth;
      grid-template-rows: $singleCellHeight $singleCellHeight;

      .tgcol:nth-child(1) {
        grid-row-start: 1;
        grid-row-end: span 2;
        grid-column: 1 1;

        .tablogrid_client {
          height: $doubleContainerHeight;
        }
      }

      .tgcol:nth-child(2) {
        grid-row: 1 1;
        grid-column: 2 2;

        .tablogrid_client {
          height: $doubleCellHeight;
        }
      }

      .tgcol:nth-child(3) {
        grid-row: 2 2;
        grid-column: 2 2;

        .tablogrid_client {
          height: $doubleCellHeight;
        }
      }
    }
  }
}

$screenBreak: $desktop-min-width;
$step: 30px;

@while $screenBreak<$content-max-width {
  @include tablogrid-for-screen-width($screenBreak);
  $screenBreak: $screenBreak + $step;
}

.spacer-row-1 {
  margin: 0 auto;
  max-width: var(--content-max-width);
  padding-bottom: 4%;
}

.spacer-row-2 {
  margin: 0 auto;
  max-width: var(--content-max-width);
  padding-bottom: 8%;
}
